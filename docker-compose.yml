version: "3.8"

services:
  multichat:
    build:
      context: https://github.com/YOUR_GITHUB_USERNAME/YOUR_REPO_NAME.git#main
      dockerfile: Dockerfile
    container_name: multichat-overlay
    restart: unless-stopped
    ports:
      - "3000:3000"
    environment:
      PORT: 3000

      # ── TWITCH ──────────────────────────────────────────────────────────────
      # 1. Go to https://dev.twitch.tv/console and create an application
      # 2. Set OAuth Redirect URL to: http://localhost:3000/twitch/callback
      #    (Twitch requires HTTPS for non-localhost URLs, so use localhost)
      # 3. Fill in Client ID and Secret below, set TWITCH_REDIRECT_URL, leave token fields blank
      # 4. Deploy, then visit http://YOUR_TRUENAS_IP:3000/twitch/manual for setup instructions
      # 5. Copy the tokens shown into the fields below and restart
      TWITCH_CHANNEL: ""
      TWITCH_CLIENT_ID: ""
      TWITCH_CLIENT_SECRET: ""
      TWITCH_REDIRECT_URL: "http://localhost:3000/twitch/callback"
      TWITCH_ACCESS_TOKEN: ""
      TWITCH_REFRESH_TOKEN: ""
      TWITCH_BOT_USERNAME: ""

      # ── YOUTUBE ─────────────────────────────────────────────────────────────
      # Get API key at: https://console.cloud.google.com (YouTube Data API v3)
      # Set YOUTUBE_CHANNEL_ID to auto-detect your live stream every time you go live
      # Find your channel ID at: https://www.youtube.com/account_advanced
      # YOUTUBE_LIVE_VIDEO_ID is optional - only needed to force a specific stream
      YOUTUBE_API_KEY: ""
      YOUTUBE_CHANNEL_ID: ""
      YOUTUBE_LIVE_VIDEO_ID: ""
      YOUTUBE_POLL_INTERVAL_MS: "5000"

      # ── KICK ────────────────────────────────────────────────────────────────
      # Just your channel name - the app will auto-fetch the chatroom ID
      # If auto-fetch fails, set KICK_CHATROOM_ID manually
      KICK_CHANNEL_NAME: ""
      KICK_CHATROOM_ID: ""

      # ── JOYSTICK.TV ─────────────────────────────────────────────────────────
      # 1. Go to joystick.tv and create a bot application
      # 2. Set the redirect URL to: http://YOUR_TRUENAS_IP:3000/joystick/callback
      # 3. Fill in Client ID and Secret, leave token fields blank
      # 4. Deploy, then visit http://YOUR_TRUENAS_IP:3000/joystick/auth to authorize
      # 5. Copy the tokens shown into the fields below and restart
      JOYSTICK_CLIENT_ID: ""
      JOYSTICK_CLIENT_SECRET: ""
      JOYSTICK_ACCESS_TOKEN: ""
      JOYSTICK_REFRESH_TOKEN: ""

    # Uncomment to persist logs to a TrueNAS dataset
    # volumes:
    #   - /mnt/pool/multichat/logs:/app/logs
